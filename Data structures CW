import json
import os

CONTACTS_FILE = "contacts.json"

def load_contacts():
  if not os.path.exists(CONTACTS_FILE):
    return []
  with open(CONTACTS_FILE, "r") as f:
    return json.load(f)

def save_contacts(contacts):
  with open(CONTACTS_FILE, "w") as f:
    json.dump(contacts, f, indent=4)

def add_contact():
  print("\n--- Add New Contact ---")
  name = input("Name: ")
  phone = input("Phone Number: ")
  email = input("Email: ")
  address = input("Address: ")

  contacts = load_contacts()
  contacts.append({
    "name": name,
    "phone": phone,
    "email": email,
    "address": address,
  })
  save_contacts(contacts)

  print("Contact added successfully!\n")

def list_contacts():
  print("\n--- All Contacts ---")
  contacts = load_contacts()

  if not contacts:
    print("No contacts found.\n")
    return
  for i, c in enumerate(contacts, start=1):
    print(f"{i}. {c['name']} - {c['phone']} - {c['email']} - {c['address']}")
  print()

def search_contacts():
  print("\n--- Search Contacts ---")
  query = input("Enter search term (name, phone, email, address): ").lower()

  contacts = load_contacts()
  results = []

  for contact in contacts:
    if any(query in str(value).lower() for value in contact.values()):
      results.append(contact)
  if not results:
    print("No matching contacts found.\n")
    return
  print(f"\nFound {len(results)} match(es):")
  for c in results:
    print(f"â€¢ {c['name']} - {c['phone']} - {c['email']} - {c['address']}")
  print()

def delete_contact():
  print("\n--- Delete Contact ---")
  name = input("Enter the name of the contact to delete: ").lower()

  contacts = load_contacts()
  updated_contacts = [c for c in contacts if c["name"].lower() != name]

  if len(updated_contacts) == len(contacts):
    print("No contacts found with that name.\n")
    return

  save_contacts(updated_contacts)
  print("Contact deleted successfully!\n")


def main():
  while True:
    print("===== CONTACTS APP =====")
    print("1. Add Contact")
    print("2. List All Contacts")
    print("3. Search Contacts")
    print("4. Delete Contact")
    print("5. Quit")

    choice = input("Choose an option: ")

    if choice == "1":
        add_contact()
    elif choice == "2":
        list_contacts()
    elif choice == "3":
        search_contacts()
    elif choice == "4":
        delete_contact()
    elif choice == "5":
        print("Goodbye!")
        break
    else:
        print("Invalid choice, try again.\n")


if __name__ == "__main__":
  main()




